//! ã€Œä½œä¸ºé™æ€å­—ä¸²å¼•ç”¨ã€
//! * ğŸ¯ç”¨äºå„ç§ã€éœ€è¦å…¼å®¹`String`ã€`&str`ã€`&String`åˆ°`&str`ã€‘çš„åœºæ™¯

/// å°†è‡ªèº«è½¬æ¢ä¸º `&str`
/// * ğŸ¯ç”¨æ¥è¡¨è¾¾ç±»ä¼¼TypeScript`String | str | &String | &str | ...`çš„è¯­ä¹‰
///   * ç”¨æ¥ç»Ÿä¸€å…¼å®¹å„ç§å­—ç¬¦ä¸²ç±»å‹
/// * ğŸ“Œåç»­å†™å‡½æ•°çš„æ—¶å€™ï¼Œåªéœ€ä¸€ä¸ª`s: impl AsStrRef`
/// * âœ¨**å†ä¹Ÿä¸ç”¨è€ƒè™‘å¯¹`String`ã€`&str`çš„é€šç”¨å…¼å®¹é—®é¢˜äº†**
///
/// ! âŒ`Deref<Target=str>`/`Deref<Target=&str>`æ— æ³•æ»¡è¶³ä¸Šè¿°å…¼å®¹è¦æ±‚
/// * ğŸ“æ— æ³•åŒæ—¶æ»¡è¶³`String`ä¸`&str`ï¼šæ»¡è¶³äº†ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªåˆä¸æ»¡è¶³äº†
pub trait AsStrRef {
    /// ç»Ÿä¸€ã€é€šç”¨ã€æ–¹ä¾¿åœ°è½¬æ¢ä¸º`&str`
    /// * ğŸ¯ä¸ç®¡è‡ªå·±æ˜¯ä»€ä¹ˆç±»å‹ï¼Œåæ­£å†…å®¹éƒ½ä¸€æ ·ï¼Œå°±ä¸€å®šèƒ½è½¬æ¢æˆ`&str`
    fn as_str_ref(&self) -> &str;
}
/// æ‰¹é‡å®ç°ä¸Šè¿°ç‰¹å¾çš„å®
macro_rules! impl_as_str_ref {
    ($( $t: ty $(,)? )*) => {
        $(
            /// ! å…¼å®¹å„è·¯ç±»å‹è½¬æ¢åˆ°`&str`
            impl AsStrRef for $t {
                fn as_str_ref(&self) -> &str {
                    self // ! å¼•ç”¨è‡ªåŠ¨è½¬æ¢å…¨éƒ½ç”¨çš„`self`ï¼Œå¯ä½œä¸ºå‚æ•°ä¼ é€’æ—¶å´ä¸èƒ½è¿™æ ·è‡ªåŠ¨è½¬æ¢
                }
            }
        )*
    };
}
impl_as_str_ref! {
    String,
    &String,
    &&String,
    &&&String,
    // ! ğŸ’­ã€2024-03-22 21:03:50ã€‘ä¸€èˆ¬åˆ°ä¸‰å±‚å¼•ç”¨å°±å¤Ÿäº†
    str,
    &str,
    &&str,
    &&&str,
}
